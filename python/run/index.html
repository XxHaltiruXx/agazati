<!DOCTYPE html>
<html lang="hu">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script>(function(){var basePath="/";if(location.pathname.indexOf("/agazati/")===0){basePath="/agazati/";}var base=document.createElement("base");base.href=basePath;document.head.appendChild(base);})();</script><link  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"  rel="stylesheet"  integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"  crossorigin="anonymous"/>
    <script  src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"  integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"  crossorigin="anonymous"></script>
    <link  rel="shortcut icon"  href="assets/images/agazati.ico"  type="image/x-icon"/>
  <link rel="shortcut icon" href="assets/images/py.ico" type="image/x-icon" />
  <link rel="stylesheet" href="assets/css/base.css">
  <link rel="stylesheet" href="assets/css/main.css">
  <link rel="stylesheet" href="assets/css/nav.css" />
  <link rel="stylesheet" href="assets/css/utilities.css" />
  <link rel="stylesheet" href="assets/css/footer.css" />
  <link rel="stylesheet" href="assets/css/runner.css" />
  <title>Python K√≥d Futtat√≥</title>
</head>
<script src="assets/js/nav.js"></script>
 <script>
/*
  Lazy Pyodide loader + safe runner (nem indul el automatikusan)
  - Nem kezdi el a loadPyodide()-t bet√∂lt√©skor.
  - Csak akkor t√∂lt, amikor a felhaszn√°l√≥ RUNTIME m≈±veletet k√©r (pl. Run gombra kattint).
  - Opci√≥: el≈ët√∂lt√©s hover/focus esem√©nyre (kikapcsolhat√≥).
*/
(function () {
  'use strict';

  const PYODIDE_URL = "https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js";
  const PYODIDE_INDEX = "https://cdn.jsdelivr.net/pyodide/v0.23.4/full/";
  let pyodide = null;
  let pyodideReady = false;
  let loadingPromise = null; // egyszeri promise a bet√∂lt√©shez

  function $id(id){ return document.getElementById(id); }
  const runBtn = () => $id('run');
  const outputEl = () => $id('output');
  const codeEl = () => $id('code');

  function setOutput(txt){ const o = outputEl(); if(o) o.textContent = txt; }
  function setRunEnabled(enabled){
    const btn = runBtn();
    if(!btn) return;
    btn.disabled = !enabled;
    btn.setAttribute('aria-disabled', String(!enabled));
  }

  // kezdeti UI √°llapot
  setRunEnabled(true); // a gomb enged√©lyezve lehet, de ha nincs pyodide √©s kattintanak, akkor elindul a load
  setOutput("K√©szen: kattints 'Futtat√°s'-ra a Pyodide bet√∂lt√©s√©hez √©s a k√≥d futtat√°s√°hoz.");

  // Egyszeri bet√∂lt√©s promisszal: ha egyszer elindul, ugyanazt a promise-t haszn√°ljuk a t√∂bbi k√©r√©shez.
  function ensurePyodideLoaded() {
    if (pyodideReady) return Promise.resolve(pyodide);
    if (loadingPromise) return loadingPromise;

    loadingPromise = new Promise((resolve, reject) => {
      // Ha a pyodide.js m√°r bet√∂lt≈ëd√∂tt a page-en (ritka), akkor csak initelj√ºk
      if (window.loadPyodide && typeof window.loadPyodide === 'function') {
        (async () => {
          try {
            setOutput('Pyodide inicializ√°l√°sa...');
            pyodide = await loadPyodide({ indexURL: PYODIDE_INDEX });
            pyodideReady = true;
            setOutput('Pyodide k√©szen √°ll.');
            resolve(pyodide);
          } catch (err) {
            setOutput('Pyodide inicializ√°l√°sa sikertelen: ' + (err && err.message ? err.message : String(err)));
            reject(err);
          }
        })();
        return;
      }

      // Dinamikusan besz√∫rjuk a pyodide scriptet (async)
      const s = document.createElement('script');
      s.src = PYODIDE_URL;
      s.async = true;
      s.onload = async () => {
        try {
          setOutput('Pyodide inicializ√°l√°sa...');
          if (typeof loadPyodide !== 'function') {
            throw new Error('loadPyodide nem tal√°lhat√≥ a bet√∂lt√∂tt scriptben.');
          }
          pyodide = await loadPyodide({ indexURL: PYODIDE_INDEX });
          pyodideReady = true;
          setOutput('Pyodide k√©szen √°ll.');
          resolve(pyodide);
        } catch (err) {
          setOutput('Pyodide inicializ√°l√°sa sikertelen: ' + (err && err.message ? err.message : String(err)));
          reject(err);
        }
      };
      s.onerror = (e) => {
        const msg = 'Pyodide script bet√∂lt√©se sikertelen (network error).';
        setOutput(msg);
        reject(new Error(msg));
      };
      document.head.appendChild(s);
    });

    return loadingPromise;
  }

  // A futtat√≥ wrapper (ugyanaz, mint kor√°bban)
  function makeWrapper(code) {
    const indented = code.split('\n').map(line => '    ' + line).join('\n');
    return `
import sys, io, traceback
_out = io.StringIO()
_old_stdout = sys.stdout
_old_stderr = sys.stderr
sys.stdout = _out
sys.stderr = _out
try:
${indented}
except Exception:
    traceback.print_exc()
finally:
    sys.stdout = _old_stdout
    sys.stderr = _old_stderr
    print(_out.getvalue(), end='')
`;
  }

  // A pontos futtat√°si logika: ha nincs pyodide -> bet√∂lt + futtat
  async function runCode() {
    const outEl = outputEl();
    setRunEnabled(false);

    try {
      setOutput('El≈ëk√©sz√≠t√©s: pyodide bet√∂lt√©se (ha sz√ºks√©ges)...');
      await ensurePyodideLoaded(); // ha m√°r bet√∂lt√∂tt, gyorsan visszat√©r
      setOutput('Futtat√°s...');
      const code = (codeEl() && codeEl().value) || '';
      const wrapper = makeWrapper(code);
      // futtat√°s aszinkron m√≥don
      await pyodide.runPythonAsync(wrapper);
      const res = pyodide.runPython("_out.getvalue()") || "";
      if (outEl) outEl.textContent = res;
    } catch (err) {
      console.error('run error', err);
      if (outEl) outEl.textContent = 'Hiba: ' + (err && err.message ? err.message : String(err));
    } finally {
      setRunEnabled(true);
    }
  }

  // Csatoljuk a run gombot ‚Äî ha kattintanak, akkor indul a lazy bet√∂lt√©s √©s futtat√°s
  function attachRunHandler() {
    const btn = runBtn();
    if (!btn) return;
    btn.addEventListener('click', function (ev) {
      ev.preventDefault();
      // amikor a felhaszn√°l√≥ r√°kattint, ind√≠tjuk a bet√∂lt√©st+futtat√°st
      runCode();
    });
  }

  // Opcion√°lis: el≈ët√∂lt√©s ha a felhaszn√°l√≥ f√≥kusz√°l vagy hover-ol a k√≥dmez≈ën.
  // Ez gyorsabb UX-et ad an√©lk√ºl, hogy a lap megterhel≈ë inicializ√°ci√≥j√°t a navig√°ci√≥kor elind√≠tan√°nk.
  function attachPrefetchHandlers() {
    const editor = codeEl();
    if (!editor) return;
    let triggered = false;
    function prefetch() {
      if (triggered) return;
      triggered = true;
      // ind√≠tsd el a bet√∂lt√©st, de ne futtass semmit
      ensurePyodideLoaded().catch(()=>{/* hib√°t m√°r jelezt√ºk a UI-n */});
    }
    editor.addEventListener('focus', prefetch, { passive: true });
    editor.addEventListener('pointerenter', prefetch, { passive: true });
    // ha k√≠v√°nod, tov√°bbi trigger: mouseover a run gombra is
    const btn = runBtn();
    if (btn) btn.addEventListener('pointerenter', prefetch, { passive: true });
  }

  // Ind√≠t√°s: k√∂tj√ºk a kezel≈ëket azonnal ha DOM k√©szen van
  function init() {
    attachRunHandler();
    attachPrefetchHandlers();
    // kezdeti √ºzenet (felhaszn√°l√≥ d√∂nthet a bet√∂lt√©s id≈ëz√≠t√©s√©r≈ël)
    setOutput("K√©szen: kattints 'Futtat√°s'-ra vagy f√≥kusz√°lj a szerkeszt≈ëre a Pyodide el≈ët√∂lt√©s√©hez.");
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init, { once: true });
  } else {
    setTimeout(init, 0);
  }

  // debug helper
  try { window.__pyodide_lazy_loader = { ensureLoaded: ensurePyodideLoaded, isReady: () => pyodideReady }; } catch (e) {}
})();
</script>


<body>


  <header>
    <nav class="navbar navbar-expand">
      <div class="container-fluid align-items-center">
        <span onclick="toggleNav()" class="sidebargomb">&#9776;</span>
        <div class="navbar-nav">
          <a class="nav-link" href="./">f≈ëoldal</a>
          <a class="nav-link" href="html/">html</a>
          <a class="nav-link" href="css/">css</a>
          <a class="nav-link" aria-current="page" href="python/">python</a>
          <a class="nav-link" href="network/">h√°l√≥zat</a>
          <a class="nav-link" href="math/">matek</a>
        </div>
      </div>
    </nav>

  </header>

  <div id="mySidenav" class="sidenav">
    <div>
      <input type="text" id="searchNav" placeholder="üîçKeres√©s...">
      <a href="#html">HTML alapok</a>
      <a href="#css">CSS alapok</a>
      <a href="#boxmodel">Box modell</a>
      <a href="#positioning">Pozicion√°l√°s</a>
      <a href="#flexbox">Flexbox</a>
      <a href="#grid">CSS Grid</a>
      <a href="#responsive">Respons√≠v diz√°jn</a>
      <a href="#animations">CSS anim√°ci√≥k</a>
      <a href="#accessibility">Hozz√°f√©rhet≈ës√©g</a>
      <a href="python.html#python">Python alapok</a>
      <a href="network.html#szamrendszer">Sz√°mrendszerek</a>
      <a href="network.html#halozat">Cisco parancsok</a>
    </div>
  </div>


  <h2 class="cim subsite">Python futtat√≥</h2>


  <main>
    <div class="row">
      <div class="col-lg-6 col-md-12 col-sm-12" id="pyeditor">
          <textarea id="code" spellcheck="false" placeholder="√çrd vagy m√°sold ide a Python k√≥dod...">print("Hell√≥ Agazati!")</textarea>
          <button id="run">‚ñ∂ Futtat√°s</button>
      </div>
      <div class="col-lg-6 col-md-12 col-sm-12" id="outputArea">
        <pre id="output"></pre>
      </div>
    </div>
  </main>
  
  <script src="assets/js/footer.js"></script>

</body>

</html>