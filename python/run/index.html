<!DOCTYPE html>
<html lang="hu">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script>(function(){var basePath="/";if(location.pathname.indexOf("/agazati/")===0){basePath="/agazati/";}var base=document.createElement("base");base.href=basePath;document.head.appendChild(base);})();</script><link  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"  rel="stylesheet"  integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"  crossorigin="anonymous"/>
    <script  src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"  integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"  crossorigin="anonymous"></script>
    <link  rel="shortcut icon"  href="assets/images/agazati.ico"  type="image/x-icon"/>
  <link rel="shortcut icon" href="assets/images/py.ico" type="image/x-icon" />
  <link rel="stylesheet" href="assets/css/base.css">
  <link rel="stylesheet" href="assets/css/main.css">
  <link rel="stylesheet" href="assets/css/nav.css" />
  <link rel="stylesheet" href="assets/css/utilities.css" />
  <link rel="stylesheet" href="assets/css/footer.css" />
  <link rel="stylesheet" href="assets/css/runner.css" />
  <title>Python KÃ³d FuttatÃ³</title>
</head>

<body>


  <header>
    <nav class="navbar navbar-expand">
      <div class="container-fluid align-items-center">
        <span onclick="toggleNav()" class="sidebargomb">&#9776;</span>
        <div class="navbar-nav">
          <a class="nav-link" href="./">fÅ‘oldal</a>
          <a class="nav-link" href="html/">html</a>
          <a class="nav-link" href="css/">css</a>
          <a class="nav-link" aria-current="page" href="python/">python</a>
          <a class="nav-link" href="network/">hÃ¡lÃ³zat</a>
          <a class="nav-link" href="math/">matek</a>
        </div>
      </div>
    </nav>

  </header>

  <div id="mySidenav" class="sidenav">
    <div>
      <input type="text" id="searchNav" placeholder="ğŸ”KeresÃ©s...">
      <a href="#html">HTML alapok</a>
      <a href="#css">CSS alapok</a>
      <a href="#boxmodel">Box modell</a>
      <a href="#positioning">PozicionÃ¡lÃ¡s</a>
      <a href="#flexbox">Flexbox</a>
      <a href="#grid">CSS Grid</a>
      <a href="#responsive">ResponsÃ­v dizÃ¡jn</a>
      <a href="#animations">CSS animÃ¡ciÃ³k</a>
      <a href="#accessibility">HozzÃ¡fÃ©rhetÅ‘sÃ©g</a>
      <a href="python.html#python">Python alapok</a>
      <a href="network.html#szamrendszer">SzÃ¡mrendszerek</a>
      <a href="network.html#halozat">Cisco parancsok</a>
    </div>
  </div>


  <h2 class="cim subsite">Python FuttatÃ³</h2>

  <main>
    <!-- Toolbar -->
    <div class="runner-toolbar">
        <!-- FuttatÃ¡s gomb (mindig lÃ¡thatÃ³) -->
        <div class="toolbar-section">
            <button class="runner-btn success" id="runBtn" title="KÃ³d futtatÃ¡sa (Ctrl+Enter)">
                <span class="icon">â–¶</span>
                <span class="btn-text">FuttatÃ¡s</span>
            </button>
        </div>
        <div class="toolbar-divider"></div>
        
        <!-- Mobil dropdown -->
        <div class="snippet-dropdown">
            <button class="snippet-dropdown-btn" id="pySnippetDropdownBtn">
                <span class="icon">ğŸ</span>
                <span>Sablonok</span>
            </button>
            <div class="snippet-dropdown-content" id="pySnippetDropdownContent">
                <button data-snippet="Hello"><span class="icon">ğŸ‘‹</span> Hello World</button>
                <button data-snippet="Input"><span class="icon">âŒ¨ï¸</span> Input</button>
                <button data-snippet="Loop"><span class="icon">ğŸ”„</span> For ciklus</button>
                <button data-snippet="Function"><span class="icon">ğŸ”§</span> FÃ¼ggvÃ©ny</button>
                <button data-snippet="Class"><span class="icon">ğŸ“¦</span> OsztÃ¡ly</button>
                <hr>
                <button data-snippet="List"><span class="icon">ğŸ“‹</span> Lista</button>
                <button data-snippet="Dict"><span class="icon">ğŸ“–</span> SzÃ³tÃ¡r</button>
                <button data-snippet="Try"><span class="icon">ğŸ›¡ï¸</span> Try-Except</button>
            </div>
        </div>
        
        <!-- Asztali snippet gombok -->
        <div class="toolbar-section snippets">
            <button class="runner-btn primary" id="insertHello" title="Hello World pÃ©lda">
                <span class="icon">ğŸ‘‹</span>
                <span class="btn-text">Hello World</span>
            </button>
            <button class="runner-btn" id="insertInput" title="Input kÃ©rÃ©s">
                <span class="icon">âŒ¨ï¸</span>
                <span class="btn-text">Input</span>
            </button>
            <button class="runner-btn" id="insertLoop" title="For ciklus">
                <span class="icon">ğŸ”„</span>
                <span class="btn-text">For ciklus</span>
            </button>
            <button class="runner-btn" id="insertFunction" title="FÃ¼ggvÃ©ny">
                <span class="icon">ğŸ”§</span>
                <span class="btn-text">FÃ¼ggvÃ©ny</span>
            </button>
            <button class="runner-btn" id="insertClass" title="OsztÃ¡ly">
                <span class="icon">ğŸ“¦</span>
                <span class="btn-text">OsztÃ¡ly</span>
            </button>
        </div>
        <div class="toolbar-divider"></div>
        <div class="toolbar-section snippets">
            <button class="runner-btn" id="insertList" title="Lista mÅ±veletek">
                <span class="icon">ğŸ“‹</span>
                <span class="btn-text">Lista</span>
            </button>
            <button class="runner-btn" id="insertDict" title="SzÃ³tÃ¡r">
                <span class="icon">ğŸ“–</span>
                <span class="btn-text">SzÃ³tÃ¡r</span>
            </button>
            <button class="runner-btn" id="insertTry" title="Try-Except">
                <span class="icon">ğŸ›¡ï¸</span>
                <span class="btn-text">Try-Except</span>
            </button>
        </div>
        <div class="toolbar-divider"></div>
        
        <!-- KÃ¶zÃ¶s gombok (mindig lÃ¡thatÃ³k) -->
        <div class="toolbar-section">
            <button class="runner-btn" id="undoBtn" title="VisszavonÃ¡s (Ctrl+Z)">
                <span class="icon">â†©ï¸</span>
                <span class="btn-text">Vissza</span>
            </button>
            <button class="runner-btn" id="redoBtn" title="Ãšjra (Ctrl+Y)">
                <span class="icon">â†ªï¸</span>
                <span class="btn-text">Ãšjra</span>
            </button>
        </div>
        <div class="toolbar-divider"></div>
        <div class="toolbar-section">
            <button class="runner-btn danger" id="clearCode" title="KÃ³d tÃ¶rlÃ©se">
                <span class="icon">ğŸ—‘ï¸</span>
                <span class="btn-text">TÃ¶rlÃ©s</span>
            </button>
            <button class="runner-btn" id="clearOutput" title="Kimenet tÃ¶rlÃ©se">
                <span class="icon">ğŸ§¹</span>
                <span class="btn-text">Kimenet</span>
            </button>
        </div>
    </div>
    
    <div class="row">
      <div class="col-lg-6 col-md-12 col-sm-12" id="pyeditor">
          <div class="runner-panel">
              <div class="runner-panel-header">
                  <div class="panel-title">
                      <span>ğŸ</span> Python SzerkesztÅ‘
                  </div>
                  <div class="panel-info" id="lineCount">1 sor</div>
              </div>
              <textarea id="code" spellcheck="false" placeholder="Ãrd ide a Python kÃ³dod, vagy vÃ¡lassz a sablonok kÃ¶zÃ¼l...">print("HellÃ³ Agazati!")</textarea>
          </div>
      </div>
      <div class="col-lg-6 col-md-12 col-sm-12" id="outputArea">
          <div class="runner-panel">
              <div class="runner-panel-header">
                  <div class="panel-title">
                      <span>ğŸ“¤</span> Kimenet
                  </div>
                  <div class="panel-info" id="runStatus">KÃ©szen Ã¡ll</div>
              </div>
              <pre id="output">KÃ©szen: kattints 'FuttatÃ¡s'-ra vagy nyomj Ctrl+Enter-t.</pre>
          </div>
      </div>
    </div>
  </main>
  
  <script>
    // Toolbar gombok kezelÃ©se
    const codeArea = document.getElementById('code');
    const outputArea = document.getElementById('output');
    const lineCount = document.getElementById('lineCount');
    const runStatus = document.getElementById('runStatus');
    
    // === Dropdown kezelÃ©s ===
    const pyDropdownBtn = document.getElementById('pySnippetDropdownBtn');
    const pyDropdownContent = document.getElementById('pySnippetDropdownContent');
    
    if (pyDropdownBtn && pyDropdownContent) {
        pyDropdownBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            pyDropdownContent.classList.toggle('show');
        });
        
        // KÃ­vÃ¼lre kattintÃ¡skor bezÃ¡rÃ¡s
        document.addEventListener('click', function() {
            pyDropdownContent.classList.remove('show');
        });
        
        // Dropdown snippet gombok
        pyDropdownContent.querySelectorAll('button[data-snippet]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                const snippet = this.dataset.snippet;
                const targetBtn = document.getElementById('insert' + snippet);
                if (targetBtn) targetBtn.click();
                pyDropdownContent.classList.remove('show');
            });
        });
    }
    
    // === VSCode-szerÅ± szerkesztÃ©si funkciÃ³k ===
    
    // ZÃ¡rÃ³jelek pÃ¡rosÃ­tÃ¡sa
    const brackets = {
        '(': ')',
        '[': ']',
        '{': '}',
        '"': '"',
        "'": "'",
        '`': '`'
    };
    
    codeArea.addEventListener('keydown', function(e) {
        const start = this.selectionStart;
        const end = this.selectionEnd;
        const value = this.value;
        
        // Ctrl+Enter futtatÃ¡s
        if (e.ctrlKey && e.key === 'Enter') {
            e.preventDefault();
            document.getElementById('runBtn').click();
            return;
        }
        
        // Tab kezelÃ©s
        if (e.key === 'Tab') {
            e.preventDefault();
            
            if (e.shiftKey) {
                // Shift+Tab: behÃºzÃ¡s csÃ¶kkentÃ©se
                const lineStart = value.lastIndexOf('\n', start - 1) + 1;
                const lineContent = value.substring(lineStart, start);
                
                if (lineContent.startsWith('    ')) {
                    this.value = value.substring(0, lineStart) + value.substring(lineStart + 4);
                    this.selectionStart = this.selectionEnd = start - 4;
                } else if (lineContent.startsWith('\t')) {
                    this.value = value.substring(0, lineStart) + value.substring(lineStart + 1);
                    this.selectionStart = this.selectionEnd = start - 1;
                }
            } else {
                // Tab: 4 szÃ³kÃ¶z beszÃºrÃ¡sa
                this.value = value.substring(0, start) + '    ' + value.substring(end);
                this.selectionStart = this.selectionEnd = start + 4;
            }
            updateLineCount();
            return;
        }
        
        // Enter: automatikus behÃºzÃ¡s (Python-specifikus)
        if (e.key === 'Enter') {
            e.preventDefault();
            
            // AktuÃ¡lis sor behÃºzÃ¡sÃ¡nak megkeresÃ©se
            const lineStart = value.lastIndexOf('\n', start - 1) + 1;
            const lineContent = value.substring(lineStart, start);
            const indent = lineContent.match(/^[\t ]*/)[0];
            
            // EllenÅ‘rizzÃ¼k, hogy Python blokk kezdÅ‘ kulcsszÃ³ van-e (def, class, if, for, while, try, with, elif, else, except, finally)
            const trimmedLine = lineContent.trim();
            const blockStarters = /^(def |class |if |for |while |try:|with |elif |else:|except|finally:)/;
            
            let newText = '\n' + indent;
            
            // Ha kettÅ‘sponttal vÃ©gzÅ‘dik vagy blokk kezdÅ‘, extra behÃºzÃ¡s
            if (trimmedLine.endsWith(':') || blockStarters.test(trimmedLine)) {
                newText = '\n' + indent + '    ';
            }
            
            this.value = value.substring(0, start) + newText + value.substring(end);
            this.selectionStart = this.selectionEnd = start + newText.length;
            updateLineCount();
            return;
        }
        
        // ZÃ¡rÃ³jelek automatikus pÃ¡rosÃ­tÃ¡sa
        if (brackets[e.key]) {
            const selectedText = value.substring(start, end);
            
            // Ha van kijelÃ¶lÃ©s, kÃ¶rbefogjuk
            if (start !== end) {
                e.preventDefault();
                const wrapped = e.key + selectedText + brackets[e.key];
                this.value = value.substring(0, start) + wrapped + value.substring(end);
                this.selectionStart = start + 1;
                this.selectionEnd = end + 1;
                updateLineCount();
                return;
            }
            
            // IdÃ©zÅ‘jeleknÃ©l ellenÅ‘rizzÃ¼k, hogy ne duplÃ¡zzon
            if ((e.key === '"' || e.key === "'" || e.key === '`') && value[start] === e.key) {
                e.preventDefault();
                this.selectionStart = this.selectionEnd = start + 1;
                return;
            }
            
            // Automatikus zÃ¡rÃ³ karakter
            e.preventDefault();
            this.value = value.substring(0, start) + e.key + brackets[e.key] + value.substring(end);
            this.selectionStart = this.selectionEnd = start + 1;
            updateLineCount();
            return;
        }
        
        // ZÃ¡rÃ³ zÃ¡rÃ³jel Ã¡tlÃ©pÃ©se ha mÃ¡r ott van
        if (['}', ']', ')', '"', "'", '`'].includes(e.key) && value[start] === e.key) {
            e.preventDefault();
            this.selectionStart = this.selectionEnd = start + 1;
            return;
        }
        
        // Backspace: pÃ¡ros tÃ¶rlÃ©se
        if (e.key === 'Backspace' && start === end && start > 0) {
            const charBefore = value[start - 1];
            const charAfter = value[start];
            
            if (brackets[charBefore] && brackets[charBefore] === charAfter) {
                e.preventDefault();
                this.value = value.substring(0, start - 1) + value.substring(start + 1);
                this.selectionStart = this.selectionEnd = start - 1;
                updateLineCount();
                return;
            }
        }
    });
    
    // BeszÃºrÃ¡s a kurzor pozÃ­ciÃ³jÃ¡hoz
    function insertAtCursor(text) {
        const start = codeArea.selectionStart;
        const end = codeArea.selectionEnd;
        const before = codeArea.value.substring(0, start);
        const after = codeArea.value.substring(end);
        codeArea.value = before + text + after;
        codeArea.selectionStart = codeArea.selectionEnd = start + text.length;
        codeArea.focus();
        updateLineCount();
    }
    
    // SorszÃ¡m frissÃ­tÃ©se
    function updateLineCount() {
        const lines = codeArea.value.split('\n').length;
        lineCount.textContent = lines + ' sor';
    }
    
    codeArea.addEventListener('input', updateLineCount);
    updateLineCount();
    
    // Hello World
    document.getElementById('insertHello').addEventListener('click', function() {
        codeArea.value = `# Hello World program
print("HellÃ³ VilÃ¡g!")
print("ÃœdvÃ¶zÃ¶llek a Python programozÃ¡sban!")

# VÃ¡ltozÃ³k
nev = "Agazati"
print(f"HellÃ³, {nev}!")`;
        updateLineCount();
    });
    
    // Input
    document.getElementById('insertInput').addEventListener('click', function() {
        insertAtCursor(`# Input kezelÃ©s (Pyodide-ban korlÃ¡tozottan mÅ±kÃ¶dik)
# Helyette hasznÃ¡lj vÃ¡ltozÃ³kat:
nev = "FelhasznÃ¡lÃ³"  # input("Mi a neved? ")
kor = 25  # int(input("HÃ¡ny Ã©ves vagy? "))

print(f"HellÃ³ {nev}, te {kor} Ã©ves vagy!")`);
    });
    
    // For ciklus
    document.getElementById('insertLoop').addEventListener('click', function() {
        insertAtCursor(`# For ciklus pÃ©ldÃ¡k
print("SzÃ¡mok 1-tÅ‘l 5-ig:")
for i in range(1, 6):
    print(f"  {i}")

print("\\nLista bejÃ¡rÃ¡sa:")
gyumolcsok = ["alma", "banÃ¡n", "cseresznye"]
for gyumolcs in gyumolcsok:
    print(f"  - {gyumolcs}")`);
    });
    
    // FÃ¼ggvÃ©ny
    document.getElementById('insertFunction').addEventListener('click', function() {
        insertAtCursor(`# FÃ¼ggvÃ©ny definiÃ¡lÃ¡sa
def udvozles(nev, nyelv="magyar"):
    """ÃœdvÃ¶zlÅ‘ fÃ¼ggvÃ©ny"""
    if nyelv == "magyar":
        return f"HellÃ³, {nev}!"
    else:
        return f"Hello, {nev}!"

# FÃ¼ggvÃ©ny hÃ­vÃ¡sa
print(udvozles("VilÃ¡g"))
print(udvozles("World", "angol"))`);
    });
    
    // OsztÃ¡ly
    document.getElementById('insertClass').addEventListener('click', function() {
        insertAtCursor(`# OsztÃ¡ly definiÃ¡lÃ¡sa
class Kutya:
    def __init__(self, nev, kor):
        self.nev = nev
        self.kor = kor
    
    def ugat(self):
        return f"{self.nev} azt mondja: Vau!"
    
    def __str__(self):
        return f"{self.nev} ({self.kor} Ã©ves)"

# Objektum lÃ©trehozÃ¡sa
buksi = Kutya("Buksi", 3)
print(buksi)
print(buksi.ugat())`);
    });
    
    // Lista
    document.getElementById('insertList').addEventListener('click', function() {
        insertAtCursor(`# Lista mÅ±veletek
szamok = [1, 2, 3, 4, 5]
print(f"Eredeti lista: {szamok}")

# Elem hozzÃ¡adÃ¡sa
szamok.append(6)
print(f"Append utÃ¡n: {szamok}")

# Lista comprehension
negyzetek = [x**2 for x in szamok]
print(f"NÃ©gyzetek: {negyzetek}")

# SzÅ±rÃ©s
parosak = [x for x in szamok if x % 2 == 0]
print(f"PÃ¡ros szÃ¡mok: {parosak}")`);
    });
    
    // SzÃ³tÃ¡r
    document.getElementById('insertDict').addEventListener('click', function() {
        insertAtCursor(`# SzÃ³tÃ¡r (dictionary) mÅ±veletek
szemely = {
    "nev": "Kiss JÃ¡nos",
    "kor": 30,
    "varos": "Budapest"
}

print(f"NÃ©v: {szemely['nev']}")
print(f"Kor: {szemely.get('kor', 'Ismeretlen')}")

# BejÃ¡rÃ¡s
print("\\nÃ–sszes adat:")
for kulcs, ertek in szemely.items():
    print(f"  {kulcs}: {ertek}")`);
    });
    
    // Try-Except
    document.getElementById('insertTry').addEventListener('click', function() {
        insertAtCursor(`# HibakezelÃ©s try-except-tel
def osztas(a, b):
    try:
        eredmeny = a / b
        return f"{a} / {b} = {eredmeny}"
    except ZeroDivisionError:
        return "Hiba: NullÃ¡val nem lehet osztani!"
    except TypeError:
        return "Hiba: Ã‰rvÃ©nytelen tÃ­pus!"
    finally:
        print("MÅ±velet befejezve.")

print(osztas(10, 2))
print(osztas(10, 0))`);
    });
    
    // TÃ¶rlÃ©s
    document.getElementById('clearCode').addEventListener('click', function() {
        if (confirm('Biztosan tÃ¶rÃ¶lni szeretnÃ©d a kÃ³dot?')) {
            codeArea.value = '';
            updateLineCount();
        }
    });
    
    // Kimenet tÃ¶rlÃ©se
    document.getElementById('clearOutput').addEventListener('click', function() {
        outputArea.textContent = 'Kimenet tÃ¶rÃ¶lve.';
        runStatus.textContent = 'KÃ©szen Ã¡ll';
    });
    
    // Undo/Redo rendszer
    let undoStack = [];
    let redoStack = [];
    let lastSavedValue = '';
    
    function saveState() {
        if (codeArea.value !== lastSavedValue) {
            undoStack.push(lastSavedValue);
            redoStack = [];
            lastSavedValue = codeArea.value;
            // Maximum 50 lÃ©pÃ©s
            if (undoStack.length > 50) undoStack.shift();
        }
    }
    
    // MentÃ©s minden vÃ¡ltozÃ¡snÃ¡l (debounce-olva)
    let saveTimeout;
    codeArea.addEventListener('input', function() {
        clearTimeout(saveTimeout);
        saveTimeout = setTimeout(saveState, 500);
    });
    
    // Undo gomb
    document.getElementById('undoBtn').addEventListener('click', function() {
        if (undoStack.length > 0) {
            redoStack.push(codeArea.value);
            const previousState = undoStack.pop();
            codeArea.value = previousState;
            lastSavedValue = previousState;
            updateLineCount();
        }
    });
    
    // Redo gomb
    document.getElementById('redoBtn').addEventListener('click', function() {
        if (redoStack.length > 0) {
            undoStack.push(codeArea.value);
            const nextState = redoStack.pop();
            codeArea.value = nextState;
            lastSavedValue = nextState;
            updateLineCount();
        }
    });
    
    // BillentyÅ±parancsok
    codeArea.addEventListener('keydown', function(e) {
        // Ctrl+Z - VisszavonÃ¡s
        if (e.ctrlKey && e.key === 'z' && !e.shiftKey) {
            e.preventDefault();
            document.getElementById('undoBtn').click();
        }
        // Ctrl+Y vagy Ctrl+Shift+Z - Ãšjra
        if ((e.ctrlKey && e.key === 'y') || (e.ctrlKey && e.shiftKey && e.key === 'z')) {
            e.preventDefault();
            document.getElementById('redoBtn').click();
        }
    });
  </script>
  
  <!-- Pyodide Lazy Loader - a body vÃ©gÃ©n, nem blokkolja az oldalt -->
  <script>
  (function () {
    'use strict';

    const PYODIDE_URL = "https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js";
    const PYODIDE_INDEX = "https://cdn.jsdelivr.net/pyodide/v0.23.4/full/";
    let pyodide = null;
    let pyodideReady = false;
    let loadingPromise = null;

    function $id(id){ return document.getElementById(id); }
    const runBtn = () => $id('runBtn');
    const outputEl = () => $id('output');
    const codeEl = () => $id('code');

    function setOutput(txt){ const o = outputEl(); if(o) o.textContent = txt; }
    function setRunEnabled(enabled){
      const btn = runBtn();
      if(!btn) return;
      btn.disabled = !enabled;
      btn.setAttribute('aria-disabled', String(!enabled));
    }

    // Egyszeri betÃ¶ltÃ©s promisszal - teljesen aszinkron, nem blokkolja semmit
    function ensurePyodideLoaded() {
      if (pyodideReady) return Promise.resolve(pyodide);
      if (loadingPromise) return loadingPromise;

      loadingPromise = new Promise((resolve, reject) => {
        if (window.loadPyodide && typeof window.loadPyodide === 'function') {
          setTimeout(async () => {
            try {
              setOutput('Pyodide inicializÃ¡lÃ¡sa...');
              pyodide = await loadPyodide({ indexURL: PYODIDE_INDEX });
              pyodideReady = true;
              setOutput('Pyodide kÃ©szen Ã¡ll.');
              resolve(pyodide);
            } catch (err) {
              setOutput('Pyodide inicializÃ¡lÃ¡sa sikertelen: ' + (err && err.message ? err.message : String(err)));
              reject(err);
            }
          }, 0);
          return;
        }

        const s = document.createElement('script');
        s.src = PYODIDE_URL;
        s.async = true;
        s.onload = () => {
          // setTimeout hogy ne blokkolja a main thread-et
          setTimeout(async () => {
            try {
              setOutput('Pyodide inicializÃ¡lÃ¡sa...');
              if (typeof loadPyodide !== 'function') {
                throw new Error('loadPyodide nem talÃ¡lhatÃ³.');
              }
              pyodide = await loadPyodide({ indexURL: PYODIDE_INDEX });
              pyodideReady = true;
              setOutput('Pyodide kÃ©szen Ã¡ll.');
              resolve(pyodide);
            } catch (err) {
              setOutput('Pyodide inicializÃ¡lÃ¡sa sikertelen: ' + (err && err.message ? err.message : String(err)));
              reject(err);
            }
          }, 0);
        };
        s.onerror = () => {
          const msg = 'Pyodide script betÃ¶ltÃ©se sikertelen.';
          setOutput(msg);
          reject(new Error(msg));
        };
        document.head.appendChild(s);
      });

      return loadingPromise;
    }

    function makeWrapper(code) {
      const indented = code.split('\n').map(line => '    ' + line).join('\n');
      return `
import sys, io, traceback
_out = io.StringIO()
_old_stdout = sys.stdout
_old_stderr = sys.stderr
sys.stdout = _out
sys.stderr = _out
try:
${indented}
except Exception:
    traceback.print_exc()
finally:
    sys.stdout = _old_stdout
    sys.stderr = _old_stderr
    print(_out.getvalue(), end='')
`;
    }

    async function runCode() {
      const outEl = outputEl();
      setRunEnabled(false);

      try {
        setOutput('Pyodide betÃ¶ltÃ©se... (elsÅ‘ futtatÃ¡skor lassabb)');
        await ensurePyodideLoaded();
        setOutput('FuttatÃ¡s...');
        const code = (codeEl() && codeEl().value) || '';
        const wrapper = makeWrapper(code);
        await pyodide.runPythonAsync(wrapper);
        const res = pyodide.runPython("_out.getvalue()") || "";
        if (outEl) outEl.textContent = res;
      } catch (err) {
        console.error('run error', err);
        if (outEl) outEl.textContent = 'Hiba: ' + (err && err.message ? err.message : String(err));
      } finally {
        setRunEnabled(true);
      }
    }

    function attachRunHandler() {
      const btn = runBtn();
      if (!btn) return;
      btn.addEventListener('click', function (ev) {
        ev.preventDefault();
        runCode();
      });
    }

    // InicializÃ¡lÃ¡s - csak a run handler, NEM indul el elÅ‘tÃ¶ltÃ©s automatikusan
    attachRunHandler();
    setOutput("KÃ©szen: kattints 'FuttatÃ¡s'-ra a Python kÃ³d futtatÃ¡sÃ¡hoz.");

    window.__pyodide_lazy_loader = { ensureLoaded: ensurePyodideLoaded, isReady: () => pyodideReady };
  })();
  </script>
  
  <script src="assets/js/nav.js"></script>
  <script src="assets/js/footer.js"></script>

</body>

</html>